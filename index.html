<!DOCTYPE html>
<html lang="en">
<head>
    <!-- ä¿æŒåŸæœ‰headéƒ¨åˆ†ä¸å˜ -->
</head>
<body class="bg-gray-100 min-h-screen p-4">
    <div class="max-w-4xl mx-auto bg-white rounded-xl shadow-md p-6">
        <!-- ä¿æŒåŸæœ‰æ ‡é¢˜å’Œæ§åˆ¶å°ä¸å˜ -->

        <!-- åŠ¨æ€æœºç¥¨è¡¨å•ä¿æŒä¸å˜ -->

        <button type="submit" form="mainForm" class="w-full bg-blue-600 text-white py-3 rounded-lg mt-6">
            Calculate All Transfers
        </button>

        <!-- ç»“æœå±•ç¤ºåŒº -->
        <div id="results" class="mt-6 space-y-4 hidden">
            <!-- ç»“æœå°†ç”±JavaScriptåŠ¨æ€ç”Ÿæˆ -->
        </div>
    </div>

<script>
// ä¿æŒåŸæœ‰å…¨å±€å˜é‡å’Œåˆå§‹åŒ–å‡½æ•°ä¸å˜

// ğŸ”¥ æ–°å¢ä¿é™©æ¨èå‡½æ•°ï¼ˆå¸¦HTMLæ ¼å¼åŒ–ï¼‰
function recommendInsurance(riskyTransfers) {
    return riskyTransfers.length > 0 ? 
        `<span class="text-red-600 font-bold">Allianz Multi-Trip</span> (è¦†ç›–é¡¹ç›®ï¼š<br>
        - èˆªç­å»¶è¯¯ï¼ˆ2å°æ—¶èµ·èµ”ï¼‰<br>
        - è¡Œæä¸¢å¤±ï¼ˆ500ç¾å…ƒèµ”å¿)<br>
        - è½¬æœºå¤±è´¥ä½å®¿è¡¥å¿)` : 
        `<span class="text-green-600 font-bold">Basic Coverage</span> (è¦†ç›–é¡¹ç›®ï¼š<br>
        - è¡Œæä¸¢å¤±ï¼ˆ200ç¾å…ƒèµ”å¿))`;
}

function calculate(e) {
    e.preventDefault();
    // ...ä¿æŒåŸæœ‰æ•°æ®æ”¶é›†å’ŒéªŒè¯é€»è¾‘...

    // ğŸ”¥ æ–°å¢é£é™©è½¬æœºç‚¹æ£€æµ‹
    const riskyTransfers = transferPoints.filter(point => {
        const transferTime = Math.round((point.nextDeparture - point.arrival) / 60000);
        return transferTime < SECURITY_TIMES[document.getElementById('country').value];
    });

    // ç”Ÿæˆè½¬æœºç»“æœ
    const results = transferPoints.map((point, idx) => {
        // ...ä¿æŒåŸæœ‰ç»“æœç”Ÿæˆé€»è¾‘...
    });

    // ğŸ”¥ æ–°å¢ä¿é™©æ¨èåŒºå—
    const insuranceBlock = `
        <div class="p-4 bg-yellow-50 rounded-lg border-2 border-yellow-200 shadow-md">
            <div class="flex items-center mb-2">
                <svg class="w-6 h-6 mr-2 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
                </svg>
                <h3 class="text-lg font-bold text-yellow-800">ä¿é™©æ¨è</h3>
            </div>
            <div class="pl-8">
                <p class="text-gray-700">${recommendInsurance(riskyTransfers)}</p>
                <p class="mt-3 text-sm ${riskyTransfers.length > 0 ? 'text-red-600' : 'text-green-600'}">
                    ${riskyTransfers.length > 0 ? 
                        `âš ï¸ æ£€æµ‹åˆ° ${riskyTransfers.length} ä¸ªé«˜é£é™©è½¬æœºç‚¹ï¼Œå»ºè®®è´­ä¹°å…¨é¢ä¿é™©` : 
                        `âœ… å½“å‰è¡Œç¨‹é£é™©åœ¨å¯æ§èŒƒå›´å†…`}
                </p>
            </div>
        </div>
    `;

    // ç»„åˆæœ€ç»ˆç»“æœ
    document.getElementById('results').innerHTML = [
        ...results,
        insuranceBlock // åŠ å…¥ä¿é™©æ¨è
    ].join('');
    document.getElementById('results').classList.remove('hidden');
}

// ä¿æŒå…¶ä»–å·¥å…·å‡½æ•°ä¸å˜
</script>
</body>
</html>
